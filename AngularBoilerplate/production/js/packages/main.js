define("utils/cookie",[],function(){function t(t){return"[object Date]"==e.call(t)}function n(t){return"[object RegExp]"==e.call(t)}var e=Object.prototype.toString,r={get:function(t){return r.has(t)?r.list()[t]:null},has:function(t){return(new RegExp("(?:;\\s*|^)"+encodeURIComponent(t)+"=")).test(document.cookie)},list:function(t){var r=document.cookie.split(";"),i,s={};for(var o=0,u=r.length;o<u;++o){i=r[o].split("="),i[0]=i[0].replace(/^\s+|\s+$/,"");if(!n(t)||t.test(i[0]))s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s},remove:function(t,n){var i={};for(var s in n||{})i[s]=n[s];return i.expires=new Date(0),i.maxAge=-1,r.set(t,null,i)},set:function(n,r,i){i=i||{};var s=[encodeURIComponent(n)+"="+encodeURIComponent(r)];i.path&&s.push("path="+i.path),i.domain&&s.push("domain="+i.domain);var o="maxAge"in i?i.maxAge:"max_age"in i?i.max_age:i["max-age"],u;"undefined"!=typeof o&&"null"!=typeof o&&!isNaN(u=parseFloat(o))&&s.push("max-age="+u);var a=t(i.expires)?i.expires.toUTCString():i.expires;return a&&s.push("expires="+a),i.secure&&s.push("secure"),s=s.join(";"),document.cookie=s,s},test:function(){var t="70ab3d396b85e670f25b93be05e027e4eb655b71",n="Ã‰lodie Jaubert";r.remove(t),r.set(t,n);var i=n==r.get(t);return r.remove(t),i}};return r}),define("app/controllers/application",["utils/cookie"],function(e){return["$scope","$rootScope","APPLICATION",function(e,t,n){for(var r in n.modules)n.modules.hasOwnProperty(r)&&(e[r+"active"]=n.modules[r]);t.title=n.name,t.$on("event:auth-loginConfirmed",function(){t.authenticated=!0}),t.$on("event:auth-loginRefused",function(e,n){t.authenticated=!1}),e.$apply()}]}),define("app/controllers/route",[],function(){return["$scope","$rootScope","$routeParams",function(e,t,n){var r=n.page||"home";e.$emit("routeLoaded",{page:r}),e.page=t.pages[r],e.$apply()}]}),define("app/controllers/partial/login",["utils/cookie"],function(e){return["$scope","AuthServiceProvider","$rootScope",function(t,n,r){t.showEnter=!0,t.showForgot=!1,t.authenticate=function(){t.validatePassword(t.user.pass)?n.authenticate({user:t.user.name,pass:t.user.pass}).success(function(n){console.log("response",n),n.authToken&&n.StatusCode===200?(e.remove("TA-authToken"),t.user.remember&&e.set("TA-authToken",n.authToken,{maxAge:6e3}),r.$broadcast("event:auth-loginConfirmed",n),t.showLogin=!1):(t.showLogin=!0,t.error=n.StatusMessage),n.StatusCode===403&&r.$broadcast("event:auth-loginRefused",n)}).error(function(){t.error="Request error"}):t.error="Invalid password"},t.validatePassword=function(e){var t=/^(?=.*\d)(?=.*[A-Z]).{8,32}$/;return t.test(e)&&e.length>=8&&e.length<=32?!0:!1},t.resetRequest=function(){n.resetRequest({user:t.user.name}).success(function(e,n){n===200&&(t.showLogin=!1),t.error=e.StatusMessage}).error(function(){t.error="Request error"})},t.resetAction=function(){n.resetAction({user:t.user.name}).success(function(e,n){n==="200"&&(t.showLogin=!1),n==="400",n==="501",n==="502",t.error=e.StatusMessage}).error(function(){t.error="Request error"})},t.changeState=function(){t.showEnter=t.showEnter?!1:!0,t.showForgot=t.showForgot?!1:!0},!r.authenticated&&!e.get("TA-authToken")&&(t.showLogin=!0),t.$apply()}]}),define("app/controllers/partial/menu",[],function(){return["$scope","$rootScope",function(e,t){e.menu=t.pages,e.$apply()}]}),define("app/controllers",["angular","config","app/controllers/application","app/controllers/route","app/controllers/partial/login","app/controllers/partial/menu"],function(e){return e.module("controllers",["APPLICATION"]).controller("ApplicationController",["$scope","$injector",function(e,t){require(["app/controllers/application"],function(n){t.invoke(n,this,{$scope:e})})}]).controller("RouteController",["$scope","$injector",function(e,t){require(["app/controllers/route"],function(n){t.invoke(n,this,{$scope:e})})}]).controller("LoginController",["$scope","$injector",function(e,t){require(["app/controllers/partial/login"],function(n){t.invoke(n,this,{$scope:e})})}]).controller("MenuController",["$scope","$injector",function(e,t){require(["app/controllers/partial/menu"],function(n){t.invoke(n,this,{$scope:e})})}])}),define("app/services/auth",["angular"],function(e){return e.module("AuthService",[]).provider("AuthServiceProvider",function(){this.$get=["$rootScope","$injector",function(e,t){var n=t.get("$http");return{authenticate:function(e){return n.post("/login/authenticate",JSON.stringify(e))},resetRequest:function(e){return n.post("/login/requestpasswordreset",JSON.stringify(e))},resetAction:function(e){return n.post("/login/actionpasswordreset",JSON.stringify(e))}}}]})}),define("app/services/version",["angular"],function(e){return e.module("VersionService",[]).provider("VersionServiceProvider",function(){this.$get=["$rootScope","$injector",function(e,t){var n=t.get("$http");return{set:function(e){return n.post("/appversion",JSON.stringify(e))},get:function(e){return n.get("/appversion/"+e.id+"/")}}}]})}),define("app/services",["angular","app/services/auth","app/services/version","mocks"],function(e){return e.module("services",["AuthService","VersionService","Mock","ENVIRONMENT"]).value("version","0.1")}),define("env",["angular"],function(e){return e.module("ENVIRONMENT",[]).constant("ENVIRONMENT",{name:"development",mock:{http:!0}})}),define("app/filters",["angular","app/services"],function(e,t){return e.module("filters",["services"]).filter("interpolate",["version",function(e){return function(t){return String(t).replace(/\%VERSION\%/mg,e)}}])}),define("app/directives",["angular","app/services","app/controllers"],function(e,t,n){return e.module("directives",["services","controllers"]).directive("appVersion",["version",function(e){return function(t,n,r){n.text(e)}}]).directive("login",function(){return{restrict:"E",controller:"LoginController",templateUrl:"js/application/view/partial/login.tpl",link:function(e,t,n){}}})}),define(["app/controllers","app/services","env","config","app/filters","app/directives"]);